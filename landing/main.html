<!DOCTYPE html>
<html class="scroll-smooth" lang="tr">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Kişisel Emlak Danışmanınız</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <meta content="" name="author" />
    <meta content="" property="og:title" />
    <meta content="" property="og:description" />
    <meta content="website" property="og:type" />
    <meta content="https://www.sizinemlaksiteniz.com/danisman-profil" property="og:url" />
    <meta content="" property="og:image" />
    <meta content="" property="og:image:alt" />
    <meta content="" property="og:site_name" />
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Work+Sans:wght@400;500;700;900" as="style" onload="this.rel='stylesheet'" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "primary": "#1193d4", "background-light": "#f6f7f8", "background-dark": "#101c22", "foreground-light": "#111618", "foreground-dark": "#f0f3f4", "card-light": "#ffffff", "card-dark": "#18262d", "subtle-light": "#617c89", "subtle-dark": "#a0b1b9", "border-light": "#dbe2e6", "border-dark": "#314551", "input-light": "#f0f3f4", "input-dark": "#18262d" },
                    fontFamily: { "display": ["Work Sans"] },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        };
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        /* Floating WhatsApp Button */
        .whatsapp-float {
            position: fixed;
            bottom: 40px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #25d366;
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 2px 2px 6px rgba(0,0,0,0.2);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: pulse-whatsapp 2s infinite;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 4px 4px 12px rgba(0,0,0,0.3);
        }

        @keyframes pulse-whatsapp {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(37, 211, 102, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
            }
        }

        .whatsapp-tooltip {
            position: absolute;
            bottom: 10px;
            right: 100%;
            margin-right: 15px;
            background-color: #333;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            white-space: nowrap;
            font-size: 14px;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
            z-index: 101;
        }

        .whatsapp-tooltip::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            margin-top: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent transparent #333;
        }

        .whatsapp-float:hover .whatsapp-tooltip {
            visibility: visible;
            opacity: 1;
        }

        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 15px;
                width: 50px;
                height: 50px;
            }
            .whatsapp-tooltip {
                display: none; /* Hide tooltip on mobile */
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="layout-container flex h-full grow flex-col">
            <header class="flex items-center justify-between whitespace-nowrap border-b border-border-light dark:border-border-dark px-4 sm:px-6 md:px-10 py-3">
                <div class="flex items-center gap-4 text-foreground-light dark:text-foreground-dark">
                    <div class="size-6 text-primary">
                        <svg fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z" fill="currentColor"></path>
                        </svg>
                    </div>
                    <h2 id="agent_name_header" class="text-lg font-bold leading-tight tracking-[-0.015em]"></h2>
                </div>
                <div class="hidden lg:flex flex-1 justify-center items-center gap-8">
                    <a class="text-sm font-medium text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary transition-colors" href="#services">Hizmetlerim</a>
                    <a class="text-sm font-medium text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary transition-colors" href="#about">Hakkımda</a>
                    <a class="text-sm font-medium text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary transition-colors" href="#contact">İletişim</a>
                </div>
                <div class="flex items-center gap-3">
                    <a href="/login" class="hidden sm:inline-flex items-center justify-center h-10 px-4 text-sm font-semibold text-subtle-light dark:text-subtle-dark hover:text-primary dark:hover:text-primary transition">
                        Giriş Yap
                    </a>
                    <a href="/dashboard" class="inline-flex items-center justify-center h-10 px-4 text-sm font-semibold rounded-lg border border-primary text-primary hover:bg-primary hover:text-white transition">
                        İlan Ekle
                    </a>
                    <a id="header-whatsapp-link" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold leading-normal tracking-[0.015em]" href="#">
                        <span class="truncate">İletişime Geç</span>
                    </a>
                    <div id="profile_photo_header" class="hidden sm:block bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" loading="lazy"></div>
                </div>
            </header>
        <main class="flex-1">
            <div class="relative bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1582407947304-fd86f028f716?q=80&w=1920&auto=format&fit=crop');">
                <div class="absolute inset-0 bg-black/50"></div>
                <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
                    <div class="text-center">
                            <div class="flex justify-center mb-6">
                                <img id="profile_photo_hero" class="rounded-full h-32 w-32 object-cover border-4 border-white shadow-lg" src="" alt="Profil Fotoğrafı">
                            </div>
                            <!-- Dijital Kartvizit Paylaş Butonu -->
                            <div class="flex justify-center mb-4">
                                <button id="shareCardBtn" class="flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-6 py-3 rounded-lg border border-white/30 transition-all duration-300 hover:scale-105 shadow-lg">
                                    <span class="material-symbols-outlined">share</span>
                                    <span class="font-medium">Kartvizitimi Paylaş</span>
                                </button>
                            </div>
                            <div class="flex flex-col gap-4">
                            <div class="text-primary text-lg font-semibold mb-2">
                                <span id="agent_title_hero">GAYRİMENKUL UZMANI</span>
                            </div>
                            <h1 class="text-white text-4xl md:text-5xl font-black leading-tight tracking-[-0.033em]"><span id="agent_city_hero1"></span> Bölgesindeki Emlak Hedeflerinize Birlikte Ulaşalım</h1>
                            <h2 class="text-white text-base md:text-lg font-normal leading-normal max-w-2xl mx-auto"><span id="agent_city_hero2"></span> bölgesindeki yolculuğunuzda size özel çözümler ve sarsılmaz bir bağlılık sunan güvenilir ortağınız, <span id="agent_name_hero"></span>.</h2>
                        </div>
                        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mt-8">
                            <a class="flex min-w-[84px] w-full sm:w-auto max-w-lg cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em]" href="#contact">
                                <span class="truncate">Danışmanlık Alın</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <section class="px-4 py-8" id="stats">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            <div class="flex flex-col items-center justify-center p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark gap-2">
                                <span id="agent_experience" class="text-3xl font-bold text-primary"></span>
                                <span class="text-sm text-subtle-light dark:text-subtle-dark">Yıllık Tecrübe</span>
                            </div>
                            <div class="flex flex-col items-center justify-center p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark gap-2">
                                <span id="agent_clients" class="text-3xl font-bold text-primary"></span>
                                <span class="text-sm text-subtle-light dark:text-subtle-dark">Mutlu Müşteri</span>
                            </div>
                            <div class="flex flex-col items-center justify-center p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark gap-2">
                                <span id="agent_sales" class="text-3xl font-bold text-primary"></span>
                                <span class="text-sm text-subtle-light dark:text-subtle-dark">Başarılı Satış</span>
                            </div>
                            <div class="flex flex-col items-center justify-center p-6 bg-card-light dark:bg-card-dark rounded-lg border border-border-light dark:border-border-dark gap-2">
                                <span id="agent_satisfaction" class="text-3xl font-bold text-primary"></span>
                                <span class="text-sm text-subtle-light dark:text-subtle-dark">Müşteri Memnuniyeti</span>
                            </div>
                        </div>
                    </section>
                                                            <section id="portfoy" class="px-4 py-12" x-data="{
                        activeCategory: 'arsa',
                        categoryDescriptions: {
                            arsa: 'İmarlı arsalarla geleceğe değer katmak isteyen yatırımcılara yönelik seçeneklerimizi keşfedin.',
                            isyeri: 'Yüksek görünürlüklü mağazalardan modern ofislere kadar işletmenize uygun işyerleri sunuyoruz.',
                            daire: 'Aile yaşamı ve yatırım için özenle seçilmiş daireleri bütçenize göre sıraladık.'
                        },
                        listings: {
                            arsa: [
                                {
                                    title: 'Merkezde İmarlı Arsa',
                                    status: 'Satılık',
                                    price: '12.750.000 ₺',
                                    location: 'Çankaya, Ankara',
                                    image: 'https://images.unsplash.com/photo-1600585154340-0ef3c08f05ff?q=80&w=1080&auto=format&fit=crop',
                                    tagline: '850 m² köşe parsel, %40-2 kat imar izni.',
                                    specs: ['850 m²', 'Konut imarlı', 'Emsal 1.80'],
                                    detailsUrl: '#',
                                    isFeatured: true
                                },
                                {
                                    title: 'Doğa Manzaralı Villa Arsası',
                                    status: 'Satılık',
                                    price: '8.400.000 ₺',
                                    location: 'Urla, İzmir',
                                    image: 'https://images.unsplash.com/photo-1515516969-d4008cc6241d?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Çeşme otoyoluna 5 dk, 1.200 m² müstakil parsel.',
                                    specs: ['1.200 m²', 'Villa imarlı', 'Altyapı hazır'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                },
                                {
                                    title: 'Sanayi Parseli',
                                    status: 'Kiralık',
                                    price: '95.000 ₺ / ay',
                                    location: 'Dilovası OSB, Kocaeli',
                                    image: 'https://images.unsplash.com/photo-1509395062183-67c5ad6faff9?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Geniş tır trafiğine uygun düz zemin.',
                                    specs: ['3.000 m²', 'Sanayi imarlı', 'Yola sıfır'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                }
                            ],
                            isyeri: [
                                {
                                    title: 'Cadde Üzeri Mağaza',
                                    status: 'Kiralık',
                                    price: '65.000 ₺ / ay',
                                    location: 'Bağdat Caddesi, İstanbul',
                                    image: 'https://images.unsplash.com/photo-1529429617124-aee455fa6f35?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Günde 12.000 yaya trafiği, 8 metre vitrin.',
                                    specs: ['240 m²', 'Zemin + asma kat', 'Klima altyapısı'],
                                    detailsUrl: '#',
                                    isFeatured: true
                                },
                                {
                                    title: 'Hazır Ofis Katı',
                                    status: 'Satılık',
                                    price: '18.900.000 ₺',
                                    location: 'Maslak, İstanbul',
                                    image: 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'LEED Gold sertifikalı plazada anahtar teslim.',
                                    specs: ['410 m²', '12 kapalı ofis', '4 araçlık otopark'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                },
                                {
                                    title: 'Depo & Lojistik Merkezi',
                                    status: 'Kiralık',
                                    price: '110.000 ₺ / ay',
                                    location: 'Gaziemir, İzmir',
                                    image: 'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Lojistik köyüne 2 km, 9 metre tavan yüksekliği.',
                                    specs: ['1.600 m²', 'Yükleme rampası', '24/7 güvenlik'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                }
                            ],
                            daire: [
                                {
                                    title: 'Boğaz Manzaralı Penthouse',
                                    status: 'Satılık',
                                    price: '42.000.000 ₺',
                                    location: 'Bebek, İstanbul',
                                    image: 'https://images.unsplash.com/photo-1613553497126-404aea79168e?q=80&w=1080&auto=format&fit=crop',
                                    tagline: '360° manzara, özel asansör ve teras.',
                                    specs: ['4+1', '280 m² brüt', 'Akıllı ev sistemi'],
                                    detailsUrl: '#',
                                    isFeatured: true
                                },
                                {
                                    title: 'Yeni Projede Aile Dairesi',
                                    status: 'Satılık',
                                    price: '9.750.000 ₺',
                                    location: 'Ataşehir, İstanbul',
                                    image: 'https://images.unsplash.com/photo-1628744448840-cf61e4bcf5b0?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Site içi 7/24 güvenlik, sosyal donatılar.',
                                    specs: ['3+1', '145 m² brüt', 'Kapalı otopark'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                },
                                {
                                    title: 'Merkezi Konumda Loft Daire',
                                    status: 'Kiralık',
                                    price: '32.000 ₺ / ay',
                                    location: 'Alsancak, İzmir',
                                    image: 'https://images.unsplash.com/photo-1599423300746-b62533397364?q=80&w=1080&auto=format&fit=crop',
                                    tagline: 'Tarihi binada yüksek tavanlı loft yaşam.',
                                    specs: ['2+1', '115 m² brüt', 'Ebeveyn banyosu'],
                                    detailsUrl: '#',
                                    isFeatured: false
                                }
                            ]
                        }
                    }">
                        <div class="bg-card-light dark:bg-card-dark border border-border-light dark:border-border-dark rounded-lg p-6 mb-8">
                            <div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
                                <div class="max-w-2xl">
                                    <p class="text-primary text-sm font-semibold uppercase tracking-[0.18em] mb-2">Portföy Merkezi</p>
                                    <h2 class="text-foreground-light dark:text-foreground-dark text-3xl font-bold leading-tight tracking-[-0.02em]">Satılık ve Kiralık Mülklerinize Tek Sayfadan Erişim</h2>
                                    <p class="text-subtle-light dark:text-subtle-dark mt-3">Alıcılar için güncel ilan akışı, danışmanlar için ise hızlı filtreleme ve düzenleme ekranları. Aradığınız gayrimenkule saniyeler içinde ulaşın.</p>
                                </div>
                                <form class="w-full max-w-xl bg-background-light dark:bg-background-dark/40 border border-border-light dark:border-border-dark rounded-lg p-4 shadow-sm grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div class="col-span-1 sm:col-span-2">
                                        <label class="block text-sm font-semibold text-subtle-light dark:text-subtle-dark mb-2" for="search-keyword">Anahtar Kelime</label>
                                        <input id="search-keyword" type="search" placeholder="Örn. Boğaz manzaralı daire" class="w-full rounded-lg border border-border-light dark:border-border-dark bg-input-light dark:bg-input-dark px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-subtle-light dark:text-subtle-dark mb-2" for="search-location">Lokasyon</label>
                                        <input id="search-location" type="text" placeholder="Semt, ilçe" class="w-full rounded-lg border border-border-light dark:border-border-dark bg-input-light dark:bg-input-dark px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-subtle-light dark:text-subtle-dark mb-2" for="search-status">Durum</label>
                                        <select id="search-status" class="w-full rounded-lg border border-border-light dark:border-border-dark bg-input-light dark:bg-input-dark px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary">
                                            <option value="">Satılık & Kiralık</option>
                                            <option value="sale">Satılık</option>
                                            <option value="rent">Kiralık</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-subtle-light dark:text-subtle-dark mb-2" for="price-min">Minimum Fiyat</label>
                                        <input id="price-min" type="number" placeholder="₺" class="w-full rounded-lg border border-border-light dark:border-border-dark bg-input-light dark:bg-input-dark px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary" />
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-subtle-light dark:text-subtle-dark mb-2" for="price-max">Maksimum Fiyat</label>
                                        <input id="price-max" type="number" placeholder="₺" class="w-full rounded-lg border border-border-light dark:border-border-dark bg-input-light dark:bg-input-dark px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary" />
                                    </div>
                                    <div class="col-span-1 sm:col-span-2 flex items-center justify-between gap-2">
                                        <div class="flex items-center gap-2">
                                            <input id="featured-only" type="checkbox" class="rounded border-border-light text-primary focus:ring-primary" />
                                            <label for="featured-only" class="text-sm text-subtle-light dark:text-subtle-dark">Yalnızca öne çıkanları göster</label>
                                        </div>
                                        <button type="button" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-primary/90 transition">Filtrele</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="flex flex-col gap-6">
                            <div class="flex flex-wrap items-center gap-2">
                                <button type="button" class="px-4 py-2 rounded-full text-sm font-semibold border border-border-light dark:border-border-dark transition" :class="activeCategory === 'arsa' ? 'bg-primary text-white border-primary' : 'bg-card-light dark:bg-card-dark text-subtle-light dark:text-subtle-dark'" @click="activeCategory = 'arsa'">Arsa</button>
                                <button type="button" class="px-4 py-2 rounded-full text-sm font-semibold border border-border-light dark:border-border-dark transition" :class="activeCategory === 'isyeri' ? 'bg-primary text-white border-primary' : 'bg-card-light dark:bg-card-dark text-subtle-light dark:text-subtle-dark'" @click="activeCategory = 'isyeri'">İşyeri</button>
                                <button type="button" class="px-4 py-2 rounded-full text-sm font-semibold border border-border-light dark:border-border-dark transition" :class="activeCategory === 'daire' ? 'bg-primary text-white border-primary' : 'bg-card-light dark:bg-card-dark text-subtle-light dark:text-subtle-dark'" @click="activeCategory = 'daire'">Daire</button>
                            </div>
                            <p class="text-subtle-light dark:text-subtle-dark text-sm" x-text="categoryDescriptions[activeCategory]"></p>
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                                <template x-for="property in listings[activeCategory]" :key="property.title">
                                    <article class="flex flex-col overflow-hidden rounded-xl border border-border-light dark:border-border-dark bg-card-light dark:bg-card-dark shadow-sm">
                                        <div class="relative">
                                            <img :src="property.image" class="h-52 w-full object-cover" loading="lazy" :alt="property.title" />
                                            <div class="absolute left-4 top-4 flex items-center gap-2">
                                                <span class="rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-foreground-light" x-text="property.status"></span>
                                                <template x-if="property.isFeatured">
                                                    <span class="rounded-full bg-primary px-3 py-1 text-xs font-semibold text-white">Öne Çıkan</span>
                                                </template>
                                            </div>
                                        </div>
                                        <div class="flex flex-1 flex-col gap-4 p-6">
                                            <div>
                                                <h3 class="text-lg font-semibold text-foreground-light dark:text-foreground-dark" x-text="property.title"></h3>
                                                <p class="text-sm text-subtle-light dark:text-subtle-dark mt-1" x-text="property.tagline"></p>
                                            </div>
                                            <div class="flex flex-wrap gap-2 text-sm text-subtle-light dark:text-subtle-dark">
                                                <span class="flex items-center gap-1 rounded-full bg-background-light dark:bg-background-dark/60 px-3 py-1"><span class="material-symbols-outlined text-base">place</span><span x-text="property.location"></span></span>
                                                <span class="flex items-center gap-1 rounded-full bg-background-light dark:bg-background-dark/60 px-3 py-1"><span class="material-symbols-outlined text-base">payments</span><span x-text="property.price"></span></span>
                                            </div>
                                            <ul class="grid grid-cols-1 gap-2 text-sm text-subtle-light dark:text-subtle-dark">
                                                <template x-for="spec in property.specs" :key="spec">
                                                    <li class="flex items-center gap-2">
                                                        <span class="material-symbols-outlined text-base text-primary">check_small</span>
                                                        <span x-text="spec"></span>
                                                    </li>
                                                </template>
                                            </ul>
                                            <div class="mt-auto flex items-center justify-between pt-4 border-t border-border-light dark:border-border-dark">
                                                <a :href="property.detailsUrl" class="text-primary font-semibold text-sm flex items-center gap-1 hover:gap-2 transition">
                                                    Detayları İncele
                                                    <span class="material-symbols-outlined text-base">arrow_forward</span>
                                                </a>
                                                <button type="button" class="rounded-lg border border-primary px-4 py-2 text-sm font-semibold text-primary hover:bg-primary hover:text-white transition">Randevu Al</button>
                                            </div>
                                        </div>
                                    </article>
                                </template>
                            </div>
                            <div class="flex flex-col gap-4 rounded-xl border border-dashed border-primary bg-primary/5 p-6">
                                <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                                    <div>
                                        <h3 class="text-lg font-semibold text-foreground-light dark:text-foreground-dark">Danışman Paneli ile İlanlarınızı Yönetin</h3>
                                        <p class="text-sm text-subtle-light dark:text-subtle-dark">Her emlakçı kendine özel şifreyle giriş yaparak ilan ekleyebilir, fiyat ve görselleri güncelleyebilir.</p>
                                    </div>
                                    <div class="flex flex-wrap gap-2">
                                        <a href="/login" class="inline-flex items-center justify-center rounded-lg bg-primary px-5 py-2 text-sm font-semibold text-white transition hover:bg-primary/90">Giriş Yap</a>
                                        <a href="/dashboard" class="inline-flex items-center justify-center rounded-lg border border-primary px-5 py-2 text-sm font-semibold text-primary transition hover:bg-primary hover:text-white">İlan Ekle</a>
                                    </div>
                                </div>
                                <p class="text-xs text-subtle-light dark:text-subtle-dark">Giriş yetkileri her danışmana özel tanımlanır; sisteme kayıtlı broker yalnızca kendi portföyünü görüntüler ve düzenler.</p>
                            </div>
                        </div>
                    </section>

                    <section id="about">
                        <h2 class="text-foreground-light dark:text-foreground-dark text-2xl font-bold leading-tight tracking-[-0.015em] px-4 pb-4">Benim Hikayem</h2>
                        <div class="p-4">
                            <div class="bg-card-light dark:bg-card-dark p-8 rounded-lg border border-border-light dark:border-border-dark">
                                <p class="text-subtle-light dark:text-subtle-dark text-base font-normal leading-normal">
                                    Gayrimenkul sektöründeki uzun yıllara dayanan tecrübemle, alım-satım ve kiralama süreçlerinizde size profesyonel destek sunmak için buradayım. Müşteri memnuniyetini her zaman ön planda tutarak, hayallerinizdeki mülke en doğru ve hızlı şekilde ulaşmanız için çalışıyorum. Güvenilir, şeffaf ve sonuç odaklı bir hizmet anlayışıyla, yatırımınıza değer katacak en iyi fırsatları birlikte değerlendirelim.
                                </p>
                            </div>
                        </div>
                    </section>
                    <section id="testimonials" x-data="{
                        activeSlide: 0,
                        testimonials: [
                            { name: 'Ayşe & Ali Yılmaz', title: 'Ev Sahipleri', image: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=256&auto=format&fit=crop', quote: 'Onunla çalışmak bir ayrıcalıktı. Sadece bir danışman değil, aynı zamanda bu heyecanlı süreçte bir dost gibiydi. Onun sayesinde hayalimizdeki evi hiç beklemediğimiz kadar kolay bulduk.' },
                            { name: 'Mehmet Kaya', title: 'Yatırımcı', image: 'https://images.unsplash.com/photo-1566753323558-f4e0952af115?q=80&w=256&auto=format&fit=crop', quote: 'Piyasa bilgisi ve profesyonelliği sayesinde yatırım portföyüm için en doğru kararları vermemi sağladı. Kendisiyle çalışmaya devam edeceğimden eminim.'},
                            { name: 'Zeynep Öztürk', title: 'İlk Evini Alan', image: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=256&auto=format&fit=crop', quote: 'İlk evimi alırken çok endişeliydim ama süreci o kadar anlaşılır ve şeffaf hale getirdi ki, kendimi tamamen güvende hissettim. Minnettarım!' }
                        ],
                        next() { this.activeSlide = (this.activeSlide + 1) % this.testimonials.length; },
                        prev() { this.activeSlide = (this.activeSlide - 1 + this.testimonials.length) % this.testimonials.length; }
                    }">
                        <h2 class="text-foreground-light dark:text-foreground-dark text-2xl font-bold leading-tight tracking-[-0.015em] px-4 pb-4">Müşterilerim Ne Diyor?</h2>
                        <div class="relative overflow-hidden p-4">
                            <div :style="{ transform: `translateX(-${activeSlide * 100}%)` }" class="flex transition-transform duration-500 ease-in-out">
                                <template x-for="(testimonial, index) in testimonials" :key="index">
                                    <div class="w-full flex-shrink-0 px-2">
                                        <div class="flex flex-col gap-4 bg-card-light dark:bg-card-dark p-6 rounded-lg border border-border-light dark:border-border-dark h-full">
                                            <div class="flex items-center gap-3">
                                                <img :src="testimonial.image" class="aspect-square rounded-full size-12 object-cover" loading="lazy" />
                                                <div class="flex-1">
                                                    <p class="text-foreground-light dark:text-foreground-dark text-base font-bold leading-normal" x-text="testimonial.name"></p>
                                                    <p class="text-subtle-light dark:text-subtle-dark text-sm font-normal leading-normal" x-text="testimonial.title"></p>
                                                </div>
                                            </div>
                                            <div class="flex gap-0.5 text-primary">
                                                <span class="material-symbols-outlined text-xl">star</span><span class="material-symbols-outlined text-xl">star</span><span class="material-symbols-outlined text-xl">star</span><span class="material-symbols-outlined text-xl">star</span><span class="material-symbols-outlined text-xl">star</span>
                                            </div>
                                            <p class="text-foreground-light dark:text-foreground-dark text-sm font-normal leading-normal" x-text="`“${testimonial.quote}”`"></p>
                                        </div>
                                    </div>
                                </template>
                            </div>
                            <button @click="prev" class="absolute top-1/2 left-0 transform -translate-y-1/2 bg-card-light/50 dark:bg-card-dark/50 hover:bg-card-light/80 dark:hover:bg-card-dark/80 rounded-full p-2 ml-4 focus:outline-none"><span class="material-symbols-outlined text-foreground-light dark:text-foreground-dark">chevron_left</span></button>
                            <button @click="next" class="absolute top-1/2 right-0 transform -translate-y-1/2 bg-card-light/50 dark:bg-card-dark/50 hover:bg-card-light/80 dark:hover:bg-card-dark/80 rounded-full p-2 mr-4 focus:outline-none"><span class="material-symbols-outlined text-foreground-light dark:text-foreground-dark">chevron_right</span></button>
                        </div>
                        <div class="flex justify-center mt-4 gap-2">
                            <template x-for="(testimonial, index) in testimonials" :key="index">
                                <button @click="activeSlide = index" class="w-3 h-3 rounded-full" :class="{'bg-primary': activeSlide === index, 'bg-subtle-light dark:bg-subtle-dark': activeSlide !== index}"></button>
                            </template>
                        </div>
                    </section>
                    <section id="contact">
                        <h2 class="text-foreground-light dark:text-foreground-dark text-2xl font-bold leading-tight tracking-[-0.015em] px-4 pb-4">Tanışalım ve Hayallerinizi Konuşalım</h2>
                        <div class="p-4">
                            <div class="max-w-lg mx-auto bg-card-light dark:bg-card-dark p-6 sm:p-8 rounded-lg border border-border-light dark:border-border-dark">
                                <div class="flex flex-col gap-6">
                                    <div class="flex flex-col gap-4">
                                        <a id="phone_contact" href="#" class="flex items-center gap-3 text-foreground-light dark:text-foreground-dark hover:text-primary dark:hover:text-primary">
                                            <span class="material-symbols-outlined text-2xl">call</span>
                                            <span id="agent_phone_contact" class="text-base font-medium"></span>
                                        </a>
                                        <a id="email_contact" href="#" class="flex items-center gap-3 text-foreground-light dark:text-foreground-dark hover:text-primary dark:hover:text-primary">
                                            <span class="material-symbols-outlined text-2xl">email</span>
                                            <span id="agent_email_contact" class="text-base font-medium"></span>
                                        </a>
                                        <!-- Sosyal Medya Linkleri -->
                                        <div class="flex gap-3 pt-2">
                                            <a id="instagram_link" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:scale-110 transition-transform duration-200" title="Instagram">
                                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                                </svg>
                                            </a>
                                            <a id="facebook_link" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white hover:scale-110 transition-transform duration-200" title="Facebook">
                                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="border-t border-border-light dark:border-border-dark"></div>
                                    <p class="text-center text-subtle-light dark:text-subtle-dark text-sm">Veya aşağıdaki formu doldurun, size en kısa sürede dönüş yapayım.</p>
                                    <form id="contactForm" class="flex flex-col gap-4">
                                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                            <input type="text" id="customerName" name="customerName" placeholder="Adınız Soyadınız" required class="w-full px-4 py-2 rounded-lg bg-input-light dark:bg-input-dark border border-border-light dark:border-border-dark text-foreground-light dark:text-foreground-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none placeholder:text-subtle-light dark:placeholder:text-subtle-dark" />
                                            <input type="tel" id="customerPhone" name="customerPhone" placeholder="Telefon Numaranız" required class="w-full px-4 py-2 rounded-lg bg-input-light dark:bg-input-dark border border-border-light dark:border-border-dark text-foreground-light dark:text-foreground-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none placeholder:text-subtle-light dark:placeholder:text-subtle-dark" />
                                        </div>
                                        <textarea id="customerMessage" name="customerMessage" placeholder="Mesajınız" rows="4" class="w-full px-4 py-2 rounded-lg bg-input-light dark:bg-input-dark border border-border-light dark:border-border-dark text-foreground-light dark:text-foreground-dark focus:ring-2 focus:ring-primary focus:border-primary outline-none placeholder:text-subtle-light dark:placeholder:text-subtle-dark"></textarea>
                                        <button type="submit" class="flex min-w-[84px] w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 transition-colors">
                                            <span class="truncate">WhatsApp ile Gönder</span>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>
            <footer class="w-full py-6">
                <div class="px-4 sm:px-6 md:px-10 flex flex-col sm:flex-row justify-between items-center gap-4 text-sm text-subtle-light dark:text-subtle-dark">
                    <div class="text-center sm:text-left">
                        <p id="agent_name_footer" class="font-bold text-foreground-light dark:text-foreground-dark"></p>
                        <p id="agent_company_footer"></p>
                        <p><a id="agent_email_footer" class="hover:text-primary" href="#"></a> | <a id="agent_phone_footer" class="hover:text-primary" href="#"></a></p>
                    </div>
                    <p class="text-center sm:text-right">© 2025 Powered by <a class="hover:text-primary transition-colors" href="https://metraap.com" target="_blank">Metraap.com</a></p>
                </div>
            </footer>
        </div>
    </div>

    <!-- Floating WhatsApp Button -->
    <a href="#" class="whatsapp-float" id="whatsapp_link" target="_blank">
        <span class="material-symbols-outlined">add_call</span>
        <span class="whatsapp-tooltip">WhatsApp ile iletişime geç</span>
    </a>

    <script>
        const PORTFOLIO_FALLBACK_IMAGE = 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?q=80&w=1080&auto=format&fit=crop';

        function buildApiUrl(endpoint) {
            const urlParams = new URLSearchParams(window.location.search);
            const isLocalTest = urlParams.get('local') === 'true';
            const host = window.location.hostname || '';
            const isHosted = host.includes('vercel.app') || host.endsWith('metraap.com') || host.endsWith('metraai.xyz');

            let baseUrl;
            const runtimeOverride = window.__METRA_API_BASE_URL || window.localStorage?.getItem('METRA_API_BASE_URL');
            if (isLocalTest) {
                baseUrl = 'http://localhost:8000';
            } else {
                if (runtimeOverride) {
                    baseUrl = runtimeOverride;
                } else if (isHosted) {
                    baseUrl = 'https://capable-beauty.up.railway.app';
                } else {
                    baseUrl = 'http://localhost:8000';
                }
            }

            if (window.location.protocol === 'https:' && baseUrl.startsWith('http://') && !baseUrl.includes('localhost') && !baseUrl.includes('127.0.0.1')) {
                baseUrl = baseUrl.replace('http://', 'https://');
            }

            const normalized = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;
            let finalUrl = `${baseUrl}${normalized}`;
            const cacheBuster = Date.now();
            finalUrl += finalUrl.includes('?') ? `&_t=${cacheBuster}` : `?_t=${cacheBuster}`;
            return finalUrl;
        }

        async function fetchFromBackend(endpoint) {
            const url = buildApiUrl(endpoint);
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Backend request failed: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error('Backend fetch error:', error);
                return null;
            }
        }

        function ensurePortfolioController() {
            const section = document.getElementById('portfoy');
            if (!section || !section.__x) {
                return null;
            }
            const data = section.__x.$data;
            if (!data._defaultListings) {
                data._defaultListings = JSON.parse(JSON.stringify(data.listings || {}));
            }
            if (typeof data.hasDynamicData === 'undefined') {
                data.hasDynamicData = false;
            }
            if (typeof data.overrideListings !== 'function') {
                data.overrideListings = function overrideListings(newListings) {
                    const categories = ['arsa', 'isyeri', 'daire'];
                    if (!this._defaultListings) {
                        this._defaultListings = JSON.parse(JSON.stringify(this.listings || {}));
                    }
                    let hasData = false;
                    const updated = {};
                    categories.forEach((category) => {
                        const items = Array.isArray(newListings[category]) ? newListings[category] : [];
                        if (items.length) {
                            updated[category] = items;
                            hasData = true;
                        } else if (this._defaultListings[category]) {
                            updated[category] = this._defaultListings[category];
                        } else {
                            updated[category] = [];
                        }
                    });
                    this.listings = updated;
                    this.hasDynamicData = hasData;
                    const firstFilled = ['arsa', 'isyeri', 'daire'].find((cat) => this.listings[cat] && this.listings[cat].length);
                    if (firstFilled) {
                        this.activeCategory = firstFilled;
                    }
                };
            }
            return data;
        }

        function normalizeStatus(status) {
            if (!status) return 'Satılık';
            const lower = status.toString().toLowerCase();
            if (lower === 'kiralık') return 'Kiralık';
            return lower.charAt(0).toUpperCase() + lower.slice(1);
        }

        function mapPropertiesByCategory(properties) {
            const grouped = { arsa: [], isyeri: [], daire: [] };
            if (!Array.isArray(properties)) {
                return grouped;
            }
            properties.forEach((item) => {
                if (!item) return;
                const category = (item.category || '').toLowerCase();
                const target = grouped[category] ? category : 'arsa';
                const specs = Array.isArray(item.specs) ? item.specs : [];
                grouped[target].push({
                    title: item.title || 'Gayrimenkul',
                    status: normalizeStatus(item.status),
                    price: item.price || '',
                    location: item.location || '',
                    image: item.image_url || PORTFOLIO_FALLBACK_IMAGE,
                    tagline: item.tagline || '',
                    specs,
                    detailsUrl: item.details_url || '#',
                    isFeatured: Boolean(item.featured),
                });
            });
            return grouped;
        }

        function applyPortfolioData(properties, attempt = 0) {
            const data = ensurePortfolioController();
            if (!data) {
                if (attempt < 10) {
                    setTimeout(() => applyPortfolioData(properties, attempt + 1), 100);
                }
                return;
            }
            const grouped = mapPropertiesByCategory(properties);
            const hasAny = Object.values(grouped).some((items) => items.length > 0);
            if (!hasAny) {
                console.log('Premium portföy verisi bulunamadı, demo içerik kullanılmaya devam ediyor.');
                return;
            }
            data.overrideListings(grouped);
        }

        async function fetchAgentProperties(agentData) {
            if (!agentData) return [];
            const slug = agentData.slug || agentData.slug_id || agentData.slugId;
            const email = agentData.email || agentData.agent_email;
            let endpointParams = '';
            if (slug) {
                endpointParams = `agent_slug=${encodeURIComponent(slug)}`;
            } else if (email) {
                endpointParams = `agent_email=${encodeURIComponent(email)}`;
            } else {
                return [];
            }
            const endpoint = `/properties/?${endpointParams}`;
            const result = await fetchFromBackend(endpoint);
            if (!Array.isArray(result)) {
                return [];
            }
            return result;
        }

        // Function to get URL parameters - Global scope'ta tanımlı
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Function to fetch agent data from API - Global scope
        async function fetchAgentData(agentId) {
            if (!agentId) return null;

            let endpoint;
            const lower = String(agentId).toLowerCase();

            if (lower.startsWith('agent') || lower.startsWith('agent_')) {
                endpoint = `/agents/${encodeURIComponent(agentId)}`;
            } else {
                endpoint = `/agents/slug/${encodeURIComponent(agentId)}`;
            }

            const result = await fetchFromBackend(endpoint);
            if (!result) {
                console.warn('Agent verisi alınamadı.');
            }
            return result;
        }

        function getAgentIdFromSubdomain() {
            // First try to get from query parameter
            const agentIdFromQuery = getUrlParameter('agent_id') || getUrlParameter('agentId') || getUrlParameter('agent');
            if (agentIdFromQuery) {
                return agentIdFromQuery;
            }
            
            // Then try to get from subdomain (e.g., ahmet-ylmaz.metraap.com)
            const hostname = window.location.hostname;
            const parts = hostname.split('.');
            
            console.log('=== SUBDOMAIN DEBUG ===');
            console.log('Hostname:', hostname);
            console.log('Parts:', parts);
            
            if (parts.length >= 3 && parts[0] !== 'www' && parts[0] !== 'metraap') {
                const subdomain = parts[0];
                console.log('Subdomain detected:', subdomain);
                return subdomain;
            }
            
            return null;
        }

        document.addEventListener('DOMContentLoaded', function() {
            
            // Check if we should redirect to subdomain after data loading
            const subdomainUrl = getUrlParameter('subdomainUrl');
            if (subdomainUrl && subdomainUrl !== '') {
                console.log('Subdomain URL found, will redirect after data loading:', subdomainUrl);
                
                // Wait for page to load and data to be populated, then redirect
                setTimeout(() => {
                    console.log('Redirecting to subdomain:', subdomainUrl);
                    window.location.href = subdomainUrl;
                }, 3000); // 3 seconds delay to show the page briefly
            }

        // Create subdomain for agent (ID bazlı)
        async function createSubdomainForAgent() {
            try {
                console.log('=== SUBDOMAIN CREATION STARTED (ID BASED) ===');
                
                // Get agent data from URL parameters
                const agentId = getUrlParameter('agentId');
                const agentName = getUrlParameter('agent');
                const agentEmail = getUrlParameter('email');
                const agentPhone = getUrlParameter('phone');
                const companyName = getUrlParameter('company');
                const experience = getUrlParameter('experience');
                const city = getUrlParameter('city');
                const happyCustomers = getUrlParameter('happyCustomers');
                const successfulSales = getUrlParameter('successfulSales');
                
                console.log('Agent data from URL:', {
                    agentId, agentName, agentEmail, agentPhone, 
                    companyName, experience, city, happyCustomers, successfulSales
                });
                
                if (!agentId || !agentName) {
                    console.log('Missing required agent data, skipping subdomain creation');
                    return;
                }
                
                // İsim-soyisim formatında subdomain oluştur (görünüş için)
                const nameParts = agentName.split(' ');
                let subdomainName = '';
                
                if (nameParts.length >= 2) {
                    // Ad ve soyadı al, Türkçe karakterleri temizle
                    const firstName = nameParts[0].toLowerCase()
                        .replace(/ğ/g, 'g').replace(/Ğ/g, 'g')
                        .replace(/ü/g, 'u').replace(/Ü/g, 'u')
                        .replace(/ş/g, 's').replace(/Ş/g, 's')
                        .replace(/ı/g, 'i').replace(/İ/g, 'i')
                        .replace(/ö/g, 'o').replace(/Ö/g, 'o')
                        .replace(/ç/g, 'c').replace(/Ç/g, 'c');
                    
                    const lastName = nameParts[nameParts.length - 1].toLowerCase()
                        .replace(/ğ/g, 'g').replace(/Ğ/g, 'g')
                        .replace(/ü/g, 'u').replace(/Ü/g, 'u')
                        .replace(/ş/g, 's').replace(/Ş/g, 's')
                        .replace(/ı/g, 'i').replace(/İ/g, 'i')
                        .replace(/ö/g, 'o').replace(/Ö/g, 'o')
                        .replace(/ç/g, 'c').replace(/Ç/g, 'c');
                    
                    subdomainName = firstName + '-' + lastName;
                } else {
                    // Tek isim varsa, sadece onu kullan
                    subdomainName = agentName.toLowerCase()
                        .replace(/ğ/g, 'g').replace(/Ğ/g, 'g')
                        .replace(/ü/g, 'u').replace(/Ü/g, 'u')
                        .replace(/ş/g, 's').replace(/Ş/g, 's')
                        .replace(/ı/g, 'i').replace(/İ/g, 'i')
                        .replace(/ö/g, 'o').replace(/Ö/g, 'o')
                        .replace(/ç/g, 'c').replace(/Ç/g, 'c')
                        .replace(/\s+/g, '-');
                }
                
                // Özel karakterleri temizle
                subdomainName = subdomainName.replace(/[^a-z0-9-]/g, '');
                
                // Birden fazla tireyi tek tireye çevir
                subdomainName = subdomainName.replace(/-+/g, '-');
                
                // Baş ve sondaki tireleri temizle
                subdomainName = subdomainName.replace(/^-|-$/g, '');
                
                console.log('Creating subdomain:', subdomainName);
                
                // Call subdomain creation API
                const subdomainResponse = await fetch('/api/create-subdomain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        agentName: agentName,
                        agentId: agentId,
                        email: agentEmail,
                        phone: agentPhone,
                        company: companyName,
                        experience: experience,
                        city: city,
                        happyCustomers: happyCustomers,
                        successfulSales: successfulSales,
                        subdomainName: subdomainName
                    })
                });
                
                const subdomainResult = await subdomainResponse.json();
                console.log('Subdomain API Response:', subdomainResult);
                
                if (subdomainResponse.ok && subdomainResult.success) {
                    const subdomainUrl = subdomainResult.subdomainUrl;
                    console.log('✅ Subdomain created successfully:', subdomainUrl);
                    
                    // Show success message to user
                    const successDiv = document.createElement('div');
                    successDiv.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: linear-gradient(135deg, #28a745, #20c997);
                        color: white;
                        padding: 20px;
                        border-radius: 15px;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                        z-index: 10000;
                        max-width: 400px;
                        font-family: 'Work Sans', sans-serif;
                        animation: slideIn 0.5s ease-out;
                    `;
                    successDiv.innerHTML = `
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <span style="font-size: 24px; margin-right: 10px;">🎉</span>
                            <strong>Kişisel Web Siteniz Hazır!</strong>
                        </div>
                        <p style="margin: 10px 0;">Artık kendi alan adınız var:</p>
                        <a href="${subdomainUrl}" target="_blank" style="color: #fff; text-decoration: underline; font-weight: bold; word-break: break-all;">${subdomainUrl}</a>
                        <div style="margin-top: 15px;">
                            <button onclick="window.location.href='${subdomainUrl}'" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 10px;">Siteye Git</button>
                            <button onclick="this.parentElement.parentElement.remove()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 8px 16px; border-radius: 8px; cursor: pointer;">Kapat</button>
                        </div>
                    `;
                    
                    // Add animation CSS
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes slideIn {
                            from { transform: translateX(100%); opacity: 0; }
                            to { transform: translateX(0); opacity: 1; }
                        }
                    `;
                    document.head.appendChild(style);
                    document.body.appendChild(successDiv);
                    
                    // Auto redirect after 10 seconds
                    setTimeout(() => {
                        if (confirm('Kişisel web sitenize yönlendirilmek istiyor musunuz?')) {
                            window.location.href = subdomainUrl;
                        }
                    }, 10000);
                    
                } else {
                    console.error('Subdomain creation failed:', subdomainResult.error);
                    // Don't show error to user, just log it
                }
                
            } catch (error) {
                console.error('Error creating subdomain:', error);
                // Don't show error to user, just log it
            }
        }
        
        // Call subdomain creation function if we have URL parameters
        if (getUrlParameter('agentId') && getUrlParameter('agent')) {
            createSubdomainForAgent();
        }

            // Helper functions for populating elements
            const populateElement = (id, value, type = 'text') => {
                const element = document.getElementById(id);
                if (element && value) {
                    switch (type) {
                        case 'text': element.textContent = value; break;
                        case 'href': element.href = value; break;
                        case 'src': element.src = value; break;
                        case 'value': element.value = value; break;
                        case 'bg-image': element.style.backgroundImage = value ? `linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.5) 100%), url('${value}')` : ''; break;
                        case 'bg-image-profile': element.style.backgroundImage = value ? `url('${value}')` : ''; break;
                    }
                }
            };
            
            const populateMeta = (selector, content) => {
                const element = document.querySelector(selector);
                if (element && content) {
                    element.setAttribute('content', content);
                }
            };

            // Function to populate page with agent data
            function populatePageWithAgentData(agentData) {
                if (!agentData) {
                    // Show error message or redirect to error page
                    document.body.innerHTML = '<div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;"><h1>Danışman Bulunamadı</h1><p>Üzgünüz, aradığınız danışmanı bulamadık.</p></div>';
                    return;
                }

                // Backend'den gelen veri yapısına göre agent'ı al
                const agent = agentData.agent || agentData;
                const agentName = agent.name || '';
                const agentCity = agent.city || '';
                const agentCompany = agent.company || agent.company_name || '';
                const agentPhone = agent.phone || '';
                const agentEmail = agent.email || '';
                const isPremiumAgent = Boolean(agent.is_premium || agent.isPremium);
                const agentTitle = agent.title || 'Gayrimenkul Uzmanı';
                const agentDescription = agent.description || `${agentName}, ${agentCity} bölgesinde emlak sektöründe ${agent.experience || 'deneyimli'} bir danışmandır. Müşterilerine en iyi hizmeti sunmayı hedeflemektedir.`;
                const aboutText = agentDescription;
                const profilePhotoUrl = agent.profile_photo_url || agent.image_url || agent.image || '';
                const heroImageUrl = agent.image_url || agent.image || agent.profile_photo_url || '';
                const agentExperience = agent.experience || '';
                const agentClients = agent.happy_customers || '';
                const agentSales = agent.successful_sales || '';
                const agentSatisfaction = '98'; // Default satisfaction rate
                const linkedinUsername = '';
                const instagramUsername = agent.instagram_url || agent.instagramUrl || '';
                const facebookUsername = agent.facebook_url || agent.facebookUrl || '';
                const ogImageUrl = profilePhotoUrl;

            if (agentName && agentCity) {
                document.title = `${agentName} - ${agentCity} Bölgesindeki Kişisel Emlak Danışmanınız`;
            }

            const description = `${agentName}, ${agentCity} bölgesindeki emlak hedeflerinize ulaşmanız için kişisel rehberinizdir. İster alım, ister satım veya yatırım olsun, size özel uzmanlık hizmeti sunuyorum.`;
            const keywords = `emlak danışmanı, gayrimenkul uzmanı, kişisel emlakçı, ${agentName}, ${agentCity}, emlak yatırımı`;
            populateMeta("meta[name='description']", description);
            populateMeta("meta[name='keywords']", keywords);
            populateMeta("meta[name='author']", agentName);
            populateMeta("meta[property='og:title']", document.title);
            populateMeta("meta[property='og:description']", description);
            populateMeta("meta[property='og:image']", ogImageUrl || heroImageUrl || profilePhotoUrl);
            populateMeta("meta[property='og:image:alt']", `${agentName}'in profesyonel bir portre fotoğrafı`);
            populateMeta("meta[property='og:site_name']", `${agentName} Kişisel Emlak Danışmanlığı`);

            populateElement('agent_name_header', agentName);
            populateElement('agent_name_hero', agentName);
            populateElement('agent_name_about', agentName);
            populateElement('agent_name_footer', agentName);
            populateElement('agent_title_hero', (agentTitle || '').toLocaleUpperCase('tr-TR'));
            populateElement('agent_city_hero1', agentCity);
            populateElement('agent_city_hero2', agentCity);
            populateElement('agent_city_about', agentCity);
            populateElement('agent_company_about', agentCompany);
            populateElement('agent_company_footer', agentCompany);

            if (agentPhone) {
                let cleanPhone = agentPhone.replace(/\D/g, '');
                if (cleanPhone.startsWith('0')) {
                    cleanPhone = cleanPhone.substring(1);
                }
                if (!cleanPhone.startsWith('90')) {
                    cleanPhone = '90' + cleanPhone;
                }
                populateElement('whatsapp_link', `https://wa.me/${cleanPhone}`, 'href');
                populateElement('agent_phone_footer', agentPhone);
                populateElement('agent_phone_footer', `tel:+${cleanPhone}`, 'href');
                populateElement('agent_phone_contact', agentPhone);
                populateElement('phone_contact', `tel:+${cleanPhone}`, 'href');
                // Header WhatsApp linkini de güncelle
                populateElement('header-whatsapp-link', `https://wa.me/${cleanPhone}`, 'href');
            }

            if(agentEmail){
                populateElement('agent_email_footer', agentEmail);
                populateElement('agent_email_footer', `mailto:${agentEmail}`, 'href');
                populateElement('agent_email_contact', agentEmail);
                populateElement('email_contact', `mailto:${agentEmail}`, 'href');
            }

            populateElement('about_text', aboutText);
            populateElement('profile_photo_header', profilePhotoUrl, 'bg-image-profile');
            populateElement('profile_photo_about', profilePhotoUrl, 'src');
            populateElement('profile_photo_hero', profilePhotoUrl, 'src');
            populateElement('hero_background', heroImageUrl, 'bg-image');

            if (agentExperience) populateElement('agent_experience', `${agentExperience}+`);
            if (agentClients) populateElement('agent_clients', `${agentClients}+`);
            if (agentSales) populateElement('agent_sales', `${agentSales}+`);
            if (agentSatisfaction) populateElement('agent_satisfaction', `${agentSatisfaction}%`);

            if (linkedinUsername) populateElement('linkedin_link', `https://linkedin.com/in/${linkedinUsername}`, 'href');
            if (instagramUsername) {
                const cleanInstagram = instagramUsername.replace('@', '').replace('https://instagram.com/', '').replace('www.instagram.com/', '').replace(/\/$/, '');
                const instagramLink = `https://instagram.com/${cleanInstagram}`;
                console.log('Setting Instagram link from agent data:', instagramLink);
                populateElement('instagram_link', instagramLink, 'href');
            }
            if (facebookUsername) {
                const cleanFacebook = facebookUsername.replace('@', '').replace('https://facebook.com/', '').replace('www.facebook.com/', '').replace(/\/$/, '');
                const facebookLink = `https://facebook.com/${cleanFacebook}`;
                console.log('Setting Facebook link from agent data:', facebookLink);
                populateElement('facebook_link', facebookLink, 'href');
            }

            if (isPremiumAgent) {
                fetchAgentProperties(agent).then((properties) => {
                    if (Array.isArray(properties) && properties.length) {
                        applyPortfolioData(properties);
                    }
                });
            }

            }

            // Function to populate page from URL parameters
            function populatePageFromUrlParameters() {
                console.log('=== POPULATING FROM URL PARAMETERS ===');
                
                const agentName = getUrlParameter('agent') || 'Emlak Danışmanı';
                const agentCity = getUrlParameter('city') || '';
                const agentCompany = getUrlParameter('company') || 'Emlak Şirketi';
                const agentPhone = getUrlParameter('phone') || '';
                const agentEmail = getUrlParameter('email') || '';
                const agentInstagram = getUrlParameter('instagramUrl') || getUrlParameter('instagram') || '';
                const agentFacebook = getUrlParameter('facebookUrl') || getUrlParameter('facebook') || '';
                const agentTitle = 'Gayrimenkul Uzmanı';
                const agentDescription = `${agentName}, ${agentCity} bölgesinde emlak sektöründe ${getUrlParameter('experience') || 'deneyimli'} bir danışmandır. Müşterilerine en iyi hizmeti sunmayı hedeflemektedir.`;
                const agentExperience = getUrlParameter('experience') || '';
                const agentClients = getUrlParameter('happyCustomers') || '';
                const agentSales = getUrlParameter('successfulSales') || '';
                const agentSatisfaction = '98'; // Default satisfaction rate

                console.log('URL Parameters:', {
                    agentName, agentCity, agentCompany, agentPhone, agentEmail, 
                    agentExperience, agentClients, agentSales
                });

                // Set page title and meta
                if (agentName && agentCity) {
                    document.title = `${agentName} - ${agentCity} Bölgesindeki Kişisel Emlak Danışmanınız`;
                }

                const description = `${agentName}, ${agentCity} bölgesindeki emlak hedeflerinize ulaşmanız için kişisel rehberinizdir. İster alım, ister satım veya yatırım olsun, size özel uzmanlık hizmeti sunuyorum.`;
                const keywords = `emlak danışmanı, gayrimenkul uzmanı, kişisel emlakçı, ${agentName}, ${agentCity}, emlak yatırımı`;
                populateMeta("meta[name='description']", description);
                populateMeta("meta[name='keywords']", keywords);
                populateMeta("meta[name='author']", agentName);
                populateMeta("meta[property='og:title']", document.title);
                populateMeta("meta[property='og:description']", description);

                // Populate page elements
                populateElement('agent_name_header', agentName);
                populateElement('agent_name_hero', agentName);
                populateElement('agent_name_about', agentName);
                populateElement('agent_name_footer', agentName);
                populateElement('agent_title_hero', agentTitle);
                populateElement('agent_city_hero1', agentCity);
                populateElement('agent_city_hero2', agentCity);
                populateElement('agent_city_about', agentCity);
                populateElement('agent_company_about', agentCompany);
                populateElement('agent_company_footer', agentCompany);
                populateElement('agent_description_about', agentDescription);
                populateElement('agent_experience_about', agentExperience);

                // Contact information
                if (agentPhone) {
                    const whatsappLink = `https://wa.me/9${agentPhone.replace(/\D/g, '')}`;
                    populateElement('whatsapp_link', whatsappLink, 'href');
                    populateElement('agent_phone_hero', agentPhone);
                    populateElement('agent_phone_footer', agentPhone);
                    // Header WhatsApp linkini de güncelle
                    populateElement('header-whatsapp-link', whatsappLink, 'href');
                }
                
                if (agentEmail) {
                    populateElement('agent_email_footer', agentEmail);
                    populateElement('email_link', `mailto:${agentEmail}`, 'href');
                }

                // Social media links - Use URL parameters directly
                if (agentInstagram) {
                    // Clean the Instagram username
                    const cleanInstagram = agentInstagram.replace('@', '').replace('https://instagram.com/', '').replace('www.instagram.com/', '').replace(/\/$/, '');
                    const instagramLink = `https://instagram.com/${cleanInstagram}`;
                    console.log('Setting Instagram link:', instagramLink);
                    populateElement('instagram_link', instagramLink, 'href');
                }
                
                if (agentFacebook) {
                    // Clean the Facebook username/page
                    const cleanFacebook = agentFacebook.replace('@', '').replace('https://facebook.com/', '').replace('www.facebook.com/', '').replace(/\/$/, '');
                    const facebookLink = `https://facebook.com/${cleanFacebook}`;
                    console.log('Setting Facebook link:', facebookLink);
                    populateElement('facebook_link', facebookLink, 'href');
                }

                // Statistics
                if (agentExperience) populateElement('agent_experience', agentExperience);
                if (agentClients) populateElement('agent_clients', `${agentClients}+`);
                if (agentSales) populateElement('agent_sales', `${agentSales}+`);
                if (agentSatisfaction) populateElement('agent_satisfaction', `${agentSatisfaction}%`);

                console.log('Page populated with URL parameters successfully');
            }

            // Fetch agent data and populate page
            const agentId = getAgentIdFromSubdomain();
            console.log('Agent ID from subdomain or URL:', agentId);
            
            if (agentId) {
                // Eğer subdomain'den geliyorsa, subdomain API'sini kullan
                const hostname = window.location.hostname;
                const parts = hostname.split('.');
                const isSubdomain = parts.length >= 3 && parts[0] !== 'www' && parts[0] !== 'metraap';
                
                if (isSubdomain) {
                    console.log('Loading agent data from subdomain:', agentId);
                    // Subdomain'den agent verilerini doğru API üzerinden çek
                    fetchAgentData(agentId)
                        .then(agentData => {
                            if (agentData) {
                                console.log('Agent data loaded via fetchAgentData:', agentData);
                                populatePageWithAgentData(agentData);
                            } else {
                                console.log('API failed, using URL parameters');
                                populatePageFromUrlParameters();
                            }
                        })
                        .catch(error => {
                            console.error('Error fetching agent data from subdomain:', error);
                            // Fallback: URL parametrelerini kullan
                            populatePageFromUrlParameters();
                        });
                } else {
                    // URL parametresinden geliyorsa, normal API'yi kullan
                    console.log('Loading agent data from URL parameter:', agentId);
                    fetchAgentData(agentId).then(agentData => {
                        if (agentData) {
                            populatePageWithAgentData(agentData);
                        } else {
                            // API'den veri gelmezse URL parametrelerini kullan
                            console.log('API failed, using URL parameters');
                            populatePageFromUrlParameters();
                        }
                    }).catch(error => {
                            console.error('Error fetching agent data from URL parameter:', error);
                            populatePageFromUrlParameters();
                        });
                }
            } else {
                // URL parametrelerini kontrol et
                if (getUrlParameter('agent') || getUrlParameter('agentId')) {
                    console.log('No agent ID but found URL parameters, using them');
                    populatePageFromUrlParameters();
                } else {
                    // No agent_id in URL or subdomain, show page with default content
                    console.log('No agent ID found, showing default page');
                }
            }
        });
    </script>
    <script>
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;

            submitBtn.innerHTML = '<span>Yönlendiriliyor...</span>';
            submitBtn.disabled = true;

            try {
                // Get agent phone number
                let agentPhone = null;
                
                // Get agentId dynamically
                const currentAgentId = getAgentIdFromSubdomain() || getUrlParameter('agentId') || getUrlParameter('agent');
                console.log('Current agent ID:', currentAgentId);
                
                // First try to get from agent data API
                if (currentAgentId) {
                    console.log('Fetching agent data for ID:', currentAgentId);
                    const agentData = await fetchAgentData(currentAgentId);
                    console.log('Agent data fetched:', agentData);
                    if (agentData && agentData.agent && agentData.agent.phone) {
                        agentPhone = agentData.agent.phone;
                        console.log('Phone from agent.agent.phone:', agentPhone);
                    } else if (agentData && agentData.phone) {
                        agentPhone = agentData.phone;
                        console.log('Phone from agent.phone:', agentPhone);
                    } else {
                        console.log('No phone found in agent data');
                    }
                }
                
                // Fallback: try to get from page elements
                if (!agentPhone) {
                    console.log('Trying to get phone from page elements');
                    const phoneElement = document.getElementById('agent_phone_contact');
                    if (phoneElement && phoneElement.textContent) {
                        agentPhone = phoneElement.textContent;
                        console.log('Phone from page element:', agentPhone);
                    }
                }
                
                console.log('Final agent phone:', agentPhone);

                if (agentPhone) {
                    const customerName = document.getElementById('customerName').value;
                    const customerPhone = document.getElementById('customerPhone').value;
                    const customerMessage = document.getElementById('customerMessage').value;
                    
                    console.log('Form data:', { customerName, customerPhone, customerMessage });

                    const message = `Yeni musteri mesaji:

Isim: ${customerName}
Telefon: ${customerPhone}
Mesaj: ${customerMessage}

Gayrimenkul danismanligi icin sizinle iletisime gecmek istiyor!`;
                    
                    // Telefon numarasini temizle ve uluslararasi formata cevir
                    let cleanAgentPhone = agentPhone.replace(/\D/g, '');
                    if (cleanAgentPhone.startsWith('0')) {
                        cleanAgentPhone = cleanAgentPhone.substring(1);
                    }
                    if (!cleanAgentPhone.startsWith('90')) {
                        cleanAgentPhone = '90' + cleanAgentPhone;
                    }
                    
                    const whatsappUrl = `https://wa.me/${cleanAgentPhone}?text=${encodeURIComponent(message)}`;

                    // Form alanlarini temizle
                    document.getElementById('customerName').value = '';
                    document.getElementById('customerPhone').value = '';
                    document.getElementById('customerMessage').value = '';

                    // Bilgilendirme
                    alert('Form basariyla gonderildi! Mesajiniz WhatsApp uzerinden danismana iletilecek.');
                    
                    // WhatsApp'i ac (popup engellenirse ayni sekmeye yonlendir)
                    const newWindow = window.open(whatsappUrl, '_blank');
                    if (!newWindow || newWindow.closed) {
                        window.location.href = whatsappUrl;
                    }

                    // Reset button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                } else {
                    throw new Error('Danışman telefon numarası bulunamadı');
                }
            } catch (error) {
                console.error('Form gönderme hatası:', error);
                alert(`❌ Hata: ${error.message}. Lütfen doğrudan WhatsApp butonunu kullanın.`);
                
                // Reset button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });

        // Phone number formatting
        document.getElementById('customerPhone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value.length <= 3) {
                    value = value;
                } else if (value.length <= 6) {
                    value = value.slice(0, 3) + ' ' + value.slice(3);    
                } else if (value.length <= 8) {
                    value = value.slice(0, 3) + ' ' + value.slice(3, 6) + ' ' + value.slice(6);
                } else {
                    value = value.slice(0, 3) + ' ' + value.slice(3, 6) + ' ' + value.slice(6, 8) + ' ' + value.slice(8, 10);
                }
            }
            e.target.value = value;
        });

        // 🔥 DİJİTAL KARTVİZİT PAYLAŞMA FONKSİYONU
        document.getElementById('shareCardBtn').addEventListener('click', function() {
            const currentUrl = window.location.href;
            const agentName = document.getElementById('agent_name_hero').textContent || 'Emlak Danışmanı';
            const agentTitle = document.getElementById('agent_title_hero').textContent || 'Gayrimenkul Uzmanı';
            const agentPhone = document.getElementById('agent_phone_contact').textContent || '';
            const agentEmail = document.getElementById('agent_email_contact').textContent || '';
            
            // WhatsApp paylaşma mesajı oluştur
            const shareText = `🎯 ${agentName} - ${agentTitle}

📞 Telefon: ${agentPhone}
📧 Email: ${agentEmail}
🌐 Web: ${currentUrl}

Profesyonel emlak danışmanlığı hizmeti almak için hemen iletişime geçin!`;

            // WhatsApp URL'sini oluştur
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText)}`;
            
            // Mobil cihaz kontrolü
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // Mobil cihazlarda doğrudan WhatsApp uygulamasını aç
                window.location.href = whatsappUrl;
            } else {
                // Masaüstünde yeni sekmede aç
                window.open(whatsappUrl, '_blank');
            }
            
            // Butona animasyon efekti ekle
            const shareBtn = document.getElementById('shareCardBtn');
            shareBtn.style.transform = 'scale(0.95)';
            shareBtn.innerHTML = '<span class="material-symbols-outlined">check</span><span class="font-medium">Paylaşıldı!</span>';
            
            setTimeout(() => {
                shareBtn.style.transform = 'scale(1)';
                shareBtn.innerHTML = '<span class="material-symbols-outlined">share</span><span class="font-medium">Kartvizitimi Paylaş</span>';
            }, 2000);
        });

        // 🔥 KOPYALAMA ÖZELLİĞİ (İkinci özellik)
        function copyPageUrl() {
            const currentUrl = window.location.href;
            
            // Modern clipboard API kullan
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(currentUrl).then(() => {
                    // Başarılı kopyalama bildirimi
                    showCopyNotification('✅ Link kopyalandı!');
                }).catch(() => {
                    // Fallback: eski yöntem
                    fallbackCopyTextToClipboard(currentUrl);
                });
            } else {
                // Fallback: eski yöntem
                fallbackCopyTextToClipboard(currentUrl);
            }
        }

        // Eski tarayıcılar için fallback kopyalama
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopyNotification('✅ Link kopyalandı!');
            } catch (error) {
                showCopyNotification('❌ Kopyalama başarısız oldu');
            }
            
            document.body.removeChild(textArea);
        }

        // Kopyalama bildirimi göster
        function showCopyNotification(message) {
            // Bildirim oluştur
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #25D366, #128C7E);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                font-family: 'Work Sans', sans-serif;
                font-weight: 500;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animasyonla göster
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3 saniye sonra gizle
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Sayfa yüklendiğinde paylaş butonunun yanına kopyalama butonu ekle
        document.addEventListener('DOMContentLoaded', function() {
            const shareBtn = document.getElementById('shareCardBtn');
            if (shareBtn) {
                // Kopyalama butonu oluştur
                const copyBtn = document.createElement('button');
                copyBtn.innerHTML = '<span class="material-symbols-outlined">content_copy</span>';
                copyBtn.className = 'ml-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white p-3 rounded-lg border border-white/20 transition-all duration-300 hover:scale-105';
                copyBtn.title = 'Linki Kopyala';
                copyBtn.onclick = copyPageUrl;
                
                // Paylaş butonunun yanına ekle
                shareBtn.parentNode.appendChild(copyBtn);
            }
        });
    </script>
    </body>
</html>
